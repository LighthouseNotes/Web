@page "/account/profile"
@inherits ProfileBase
@attribute [Authorize]
<PageTitle> Profile</PageTitle>
<PageLoad @ref="PageLoad">

    <MudText Typo="Typo.h2" Align="Align.Center"> Profile</MudText>

    <MudText Typo="Typo.subtitle1" Align="Align.Center"> Use the form below to edit your Lighthouse notes profile
    </MudText>

    <MudGrid Class="justify-center">
        <MudItem xs="12" sm="6">

            <MudCard>
                <EditForm Model="@Model" OnValidSubmit="OnValidSubmit">
                    <DataAnnotationsValidator/>
                    <MudCardHeader>
                        <CardHeaderAvatar>
                            <MudAvatar>
                                <MudImage Height="45" Src="@User.ProfilePicture"
                                          ObjectFit="ObjectFit.ScaleDown"></MudImage>
                            </MudAvatar>
                        </CardHeaderAvatar>
                        <CardHeaderContent>
                            <MudText Typo="Typo.h6"> @User.DisplayName </MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudTextField Label="Given Name"
                                      @bind-Value="Model.GivenName" For="@(() => Model.GivenName)"/>
                        <MudTextField Label="Last name"
                                      @bind-Value="Model.LastName" For="@(() => Model.LastName)"/>
                        <MudTextField Label="Display name"
                                      @bind-Value="Model.DisplayName" For="@(() => Model.DisplayName)"/>
                        <MudTextField Label="Email address"
                                      @bind-Value="Model.EmailAddress" For="@(() => Model.EmailAddress)"
                                      Disabled="true"/>
                        <MudTextField Label="Job title"
                                      @bind-Value="Model.JobTitle" For="@(() => Model.JobTitle)"/>
                    </MudCardContent>
                    <MudCardActions>
                        <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary"
                                   Class="ml-auto"> Update profile
                        </MudButton>
                    </MudCardActions>
                </EditForm>
            </MudCard>

        </MudItem>

        <MudItem xs="12" sm="6">
            <MudCard>
                <MudCardContent>
                    <MudText Typo="Typo.h2" Align="Align.Center"> Profile picture</MudText>
                    <MudText Typo="Typo.subtitle1" Align="Align.Center"> To change your profile picture, please follow
                        the below instructions
                    </MudText>
                    <MudText Style="margin: 1em;"> Lighthouse notes uses Gravatar which is a service that allows users
                        to create a profile picture (avatar) that automatically appears on websites that uses Gravatar.
                    </MudText>
                    <MudText Style="margin: 1em;"> Either
                        <MudLink Href="https://gravatar.com/connect/"> sign up for an account</MudLink>
                        or
                        <MudLink Href="https://gravatar.com/login/"> login</MudLink>
                        into an existing account to change your profile picture.
                    </MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>

</PageLoad>